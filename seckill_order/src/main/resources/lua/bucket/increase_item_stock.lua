---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Ezreal.
--- DateTime: 2023/1/19 11:27
---

--- 库存数量对应的键不存在
if (redis.call('exists', KEYS[1]) == 0) then
    return -996
end

---
if (redis.call('exists', KEYS[2]) == 1) then
    return -998
end

---
if (redis.call('exists', KEYS[3]) == 1) then
    return -997
end

if (redis.call('exists', KEYS[1]) == 1) then
    local quantity = tonumber(ARGV[1])
    redis.call('incrby', KEYS[1], quantity)
    return 1
end

return -10000
